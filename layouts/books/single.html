{{ define "main" }}
<link rel="stylesheet" href="{{ "css/books.css" | relURL }}">
<div class="post-container">
	<main class="post-content">
		<div class="post">

			<!-- Book hero: cover + metadata -->
			<div class="book-hero">
				{{ with .Params.cover }}
				<div class="book-hero-cover">
					<img src="{{ . }}" alt="{{ $.Title }} cover">
				</div>
				{{ end }}

				<div class="book-hero-meta">
					<h1 class="book-hero-title">{{ .Title }}</h1>

					{{ with .Params.author }}
					<p class="book-hero-author">
						{{- range $i, $a := . -}}
							{{- if $i }}, {{ end -}}
							{{ $a }}
						{{- end -}}
					</p>
					{{ end }}

					{{ with .Params.rating }}
					<p class="book-hero-rating">
						{{- $full := int . -}}
						{{- range (seq $full) }}&#9733;{{ end -}}
						{{- $empty := sub 5 $full -}}
						{{- range (seq $empty) }}&#9734;{{ end }}
						<span class="book-hero-rating-num">{{ . }}/5</span>
					</p>
					{{ end }}

					{{ with .Params.Publisher }}
					<p class="book-hero-publisher">{{ . }}</p>
					{{ end }}

					{{ with .Params.formats }}
					<div class="book-hero-formats">
						{{ range . }}
						<span class="book-format-badge">{{ . }}</span>
						{{ end }}
					</div>
					{{ end }}

					{{ with .Params.link }}
					<a href="{{ . }}" class="book-hero-link" target="_blank" rel="noopener">Buy on Bookshop.org</a>
					{{ end }}
				</div>
			</div>
			<!-- /Book hero -->

			{{ .Content }}
			{{ partial "single/footer.html" . }}
		</div>
		<!-- Adds a comments section -->
		<!-- =========================== -->
		<script src="https://utteranc.es/client.js"
				repo="sntag/blog-hugo"
				issue-term="title"
				theme="github-light"
				crossorigin="anonymous"
				async>
		</script>
		<!-- --------------------------- -->
		<div class="pagination">
			{{- if .Page.Prev }}
			<a href="{{ .Page.Prev.RelPermalink }}" class="left arrow">&#8592;</a>
			{{- end }}
			{{- if .Page.Next }}
			<a href="{{ .Page.Next.RelPermalink }}" class="right arrow">&#8594;</a>
			{{- end }}
			<a href="#" class="top">Top</a>
		</div>
	</main>

	<!-- Table of Contents â€“ books section only -->
	{{ if .TableOfContents }}
	<aside class="toc">
		<h3>Contents</h3>
		{{ .TableOfContents }}
	</aside>
	{{ end }}
</div>
{{ end }}
